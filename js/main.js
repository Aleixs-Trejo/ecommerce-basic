//PRODUCTOS
const products = [
  //ABRIGOS
  {
    id: "coat-01", //id del producto para js
    title: "Coat 01", //nombre del producto en html
    img: "./../img/abrigos/01.jpg", //ruta imagen
    category: {
      name: "Coats", //nombre de la categoria del producto para mostrar
      id: "coats" //identificador del producto para js
    },
    price: 100
  },
  {
    id: "coat-02",
    title: "Coat 02",
    img: "./../img/abrigos/02.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-03",
    title: "Coat 03",
    img: "./../img/abrigos/03.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-04",
    title: "Coat 04",
    img: "./../img/abrigos/04.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-05",
    title: "Coat 05",
    img: "./../img/abrigos/05.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-06",
    title: "Coat 06",
    img: "./../img/abrigos/01.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-07",
    title: "Coat 07",
    img: "./../img/abrigos/02.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-08",
    title: "Coat 08",
    img: "./../img/abrigos/03.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-09",
    title: "Coat 09",
    img: "./../img/abrigos/04.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-10",
    title: "Coat 10",
    img: "./../img/abrigos/05.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-11",
    title: "Coat 11",
    img: "./../img/abrigos/01.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-12",
    title: "Coat 12",
    img: "./../img/abrigos/02.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-13",
    title: "Coat 13",
    img: "./../img/abrigos/03.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-14",
    title: "Coat 14",
    img: "./../img/abrigos/04.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-15",
    title: "Coat 15",
    img: "./../img/abrigos/05.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-16",
    title: "Coat 16",
    img: "./../img/abrigos/01.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-17",
    title: "Coat 17",
    img: "./../img/abrigos/02.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-18",
    title: "Coat 18",
    img: "./../img/abrigos/03.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-19",
    title: "Coat 19",
    img: "./../img/abrigos/04.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  {
    id: "coat-20",
    title: "Coat 20",
    img: "./../img/abrigos/05.jpg",
    category: {
      name: "Coats",
      id: "coats"
    },
    price: 100
  },
  //CAMISETAS
  {
    id: "tshirt-01",
    title: "T-Shirt 01",
    img: "./../img/camisetas/01.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-02",
    title: "T-Shirt 02",
    img: "./../img/camisetas/02.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-03",
    title: "T-Shirt 03",
    img: "./../img/camisetas/03.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-04",
    title: "T-Shirt 04",
    img: "./../img/camisetas/04.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-05",
    title: "T-Shirt 05",
    img: "./../img/camisetas/05.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-06",
    title: "T-Shirt 06",
    img: "./../img/camisetas/06.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-07",
    title: "T-Shirt 07",
    img: "./../img/camisetas/07.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-08",
    title: "T-Shirt 08",
    img: "./../img/camisetas/08.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-09",
    title: "T-Shirt 09",
    img: "./../img/camisetas/01.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-10",
    title: "T-Shirt 10",
    img: "./../img/camisetas/02.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-11",
    title: "T-Shirt 11",
    img: "./../img/camisetas/03.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-12",
    title: "T-Shirt 12",
    img: "./../img/camisetas/04.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-13",
    title: "T-Shirt 13",
    img: "./../img/camisetas/05.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-14",
    title: "T-Shirt 14",
    img: "./../img/camisetas/06.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-15",
    title: "T-Shirt 15",
    img: "./../img/camisetas/07.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-16",
    title: "T-Shirt 16",
    img: "./../img/camisetas/08.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-17",
    title: "T-Shirt 17",
    img: "./../img/camisetas/01.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-18",
    title: "T-Shirt 18",
    img: "./../img/camisetas/02.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-19",
    title: "T-Shirt 19",
    img: "./../img/camisetas/03.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-20",
    title: "T-Shirt 20",
    img: "./../img/camisetas/04.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-21",
    title: "T-Shirt 21",
    img: "./../img/camisetas/05.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-22",
    title: "T-Shirt 22",
    img: "./../img/camisetas/06.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-23",
    title: "T-Shirt 23",
    img: "./../img/camisetas/07.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  {
    id: "tshirt-24",
    title: "T-Shirt 24",
    img: "./../img/camisetas/08.jpg",
    category: {
      name: "T-Shirts",
      id: "tshirts"
    },
    price: 100
  },
  //PANTALONES
  {
    id: "pants-01",
    title: "Pants 01",
    img: "./../img/pantalones/01.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-02",
    title: "Pants 02",
    img: "./../img/pantalones/02.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-03",
    title: "Pants 03",
    img: "./../img/pantalones/03.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-04",
    title: "Pants 04",
    img: "./../img/pantalones/04.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-05",
    title: "Pants 05",
    img: "./../img/pantalones/05.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-06",
    title: "Pants 06",
    img: "./../img/pantalones/01.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-07",
    title: "Pants 07",
    img: "./../img/pantalones/02.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-08",
    title: "Pants 08",
    img: "./../img/pantalones/03.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-09",
    title: "Pants 09",
    img: "./../img/pantalones/04.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-10",
    title: "Pants 10",
    img: "./../img/pantalones/05.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-11",
    title: "Pants 11",
    img: "./../img/pantalones/01.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-12",
    title: "Pants 12",
    img: "./../img/pantalones/02.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-13",
    title: "Pants 13",
    img: "./../img/pantalones/03.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-14",
    title: "Pants 14",
    img: "./../img/pantalones/04.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-15",
    title: "Pants 15",
    img: "./../img/pantalones/05.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-16",
    title: "Pants 16",
    img: "./../img/pantalones/01.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-17",
    title: "Pants 17",
    img: "./../img/pantalones/02.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-18",
    title: "Pants 18",
    img: "./../img/pantalones/03.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-19",
    title: "Pants 19",
    img: "./../img/pantalones/04.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
  {
    id: "pants-20",
    title: "Pants 20",
    img: "./../img/pantalones/05.jpg",
    category: {
      name: "Pants",
      id: "pants"
    },
    price: 100
  },
];

const containerProducts = document.querySelector("#container__products");
const buttonsCategory = document.querySelectorAll(".button__category");
const mainTitle = document.querySelector("#main__title");
let cartAdd = document.querySelectorAll(".add__cart");
const cartCount = document.querySelector("#cart__count");

function cargarProductos(productoElegido){
  containerProducts.innerHTML = "";
  productoElegido.forEach(product => {
    const div = document.createElement("div");
    div.classList.add("product");
    div.innerHTML = `
    <figure class="card__figure">
      <img src="${product.img}" alt="${product.title}" class="card__img">
    </figure>
    <div class="card__description">
      <h3 class="product__name">${product.title}</h3>
      <p class="producto__price">$100</p>
      <button class="add__cart" id="${product.id}">Add</button>
    </div>
    `;
    containerProducts.append(div);
  })
  updateCartAdd();
}
cargarProductos(products);

//ELIMINA LAS CLASES DE LOS BOTONES ACTIVOS
const removeActiveElements = (selector) => {
  const elementsActive = document.querySelectorAll(`.${selector}`);
  if(elementsActive){
    elementsActive.forEach(elementActive => {
      elementActive.classList.remove(selector);
    })
  }
};

//SELECCIONAMOS UN SOLO BOTON POR CATEGORIA
buttonsCategory.forEach(button => {
  button.addEventListener("click", (e) =>{
    e.preventDefault();
    if(!button.classList.contains("active")){
      removeActiveElements("active");
      button.classList.add("active");
    }
    if (e.currentTarget.id != "all"){
      const productButton = products.filter(product => product.category.id === e.currentTarget.id);
      const productCategory = products.find(product => product.category.id === e.currentTarget.id);
      mainTitle.innerHTML = productCategory.category.name;
      cargarProductos(productButton);
    }
    else{
      mainTitle.innerHTML = "All Products"
      cargarProductos(products)
    }
  })
});

function updateCartAdd(){
  cartAdd = document.querySelectorAll(".add__cart");
  cartAdd.forEach(button => {
    button.addEventListener("click", addToCart);
  });
}

let productsInCart;
let cartAmount;

let productsCartLS = localStorage.getItem("Products-in-Cart");

if(productsCartLS){
  productsInCart = JSON.parse(productsCartLS);
  updateCartCount();
}else{
  productsInCart = [];
}

function addToCart(e){
  const idButton = e.currentTarget.id;
  const productAdded = products.find(product => product.id === idButton);

  if (productsInCart.some(product => product.id === idButton)){
    const indexProductsInCart = productsInCart.findIndex(product => product.id === idButton);
    productsInCart[indexProductsInCart].amount++
  } else{
    productAdded.amount = 1;
    productsInCart.push(productAdded);
  }

  updateCartCount();

  localStorage.setItem("Products-in-Cart", JSON.stringify(productsInCart));
}

function updateCartCount(){
  let count = productsInCart.reduce((acc, product) => acc + product.amount, 0);
  cartCount.innerHTML = count;
}